/* ===== Mega menu (two-panel, unified width) ===== */

:root{
  --mega-max: 90%;        /* единая ширина панели */
  --mega-h: 400px;        /* единая высота панели */

  /* Отступы по краям экрана: одинаковые слева/справа */
  --mega-side-gap: 24px;

  /* Вертикальная позиция */
  --mega-top: 109px;
}

.mega-menu{
  align-items: stretch;
}

.mega-nav { position: relative; }
.mega-toggle { cursor: pointer; user-select: none; }

/* =========================================================
   PANEL (fixed, centered, same size for all menu items)
   + scrolling inside left/right columns
   ========================================================= */

.mega-panel{
  position: fixed;
  top: var(--mega-top);
  left: 50%;
  transform: translateX(-50%) translateY(8px);

  width: min(var(--mega-max), calc(100vw - (var(--mega-side-gap) * 2)));
  height: var(--mega-h);

  background: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 1px;
  box-shadow:
    0 10px 30px rgba(0,0,0,0.12),
    0 20px 80px rgba(0,0,0,0.18);

  display: grid;
  grid-template-columns: var(--mega-left, 260px) 1fr;

  overflow: hidden;
  opacity: 0;
  pointer-events: none;

  transition: opacity .18s ease, transform .18s ease;
  z-index: 10000;
}

/* Open state */
.mega-nav.is-open > .mega-panel{
  opacity: 1;
  pointer-events: auto;
  transform: translateX(-50%) translateY(0);
}

/* IMPORTANT for grid overflow: allow children to shrink */
.mega-left,
.mega-right,
.mega-preview,
.mega-content{
  min-height: 0;
}

/* =========================
   LEFT column (submenu list)
   ========================= */

.mega-left{
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;

  gap: 6px;
  padding: 14px;

  overflow-y: auto;
  overscroll-behavior: contain;
  scrollbar-gutter: stable;
}

/* Submenu items: compact (you asked ~3x lower than before) */
.mega-item{
  width: 100%;
  text-align: left;
  background: transparent;
  border: 1px solid transparent;

  color: var(--text-color);
  font-weight: 600;

  padding: 6px 10px;
  line-height: 1.15;

  border-radius: 1px;
  transition: background .15s ease, border-color .15s ease;
  position: relative;
}

.mega-item:hover,
.mega-item:focus{
  outline: none;
  background: color-mix(in srgb, var(--brand) 10%, transparent);
  border-color: color-mix(in srgb, var(--brand) 35%, transparent);
}

.mega-item.is-active{
  background: color-mix(in srgb, var(--brand) 14%, transparent);
  border-color: color-mix(in srgb, var(--brand) 55%, transparent);
}

/* Blue bar without shifting */
.mega-item.is-active::before,
.mega-item:hover::before{
  content: "";
  position: absolute;
  left: 0;
  top: 6px;
  bottom: 6px;
  width: 4px;
  background: var(--brand);
}

/* ===== Overview item (special) ===== */

/* Базовый акцент для пункта Overview */
.mega-item[data-overview="true"]{
  font-weight: 800;
  border-color: color-mix(in srgb, var(--brand) 35%, var(--border-color));
  background: color-mix(in srgb, var(--brand) 10%, transparent);
  padding-top: 10px;
  padding-bottom: 10px;
}

/* Иконка-намёк "дом/раздел" (можно заменить на bi-house, если захотите) */
.mega-item[data-overview="true"]::after{
  content: "Start";
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  font-size: .72rem;
  font-weight: 800;
  letter-spacing: .02em;

  color: var(--text-inverse);
  background: var(--brand);
  border-radius: 1px;
  padding: 2px 8px;
}

/* Полоска слева для overview — мягче, чем у hover */
.mega-item[data-overview="true"]::before{
  content: "";
  position: absolute;
  left: 0;
  top: 6px;
  bottom: 6px;
  width: 4px;
  background: color-mix(in srgb, var(--brand) 70%, transparent);
}

/* Разделитель после Overview, чтобы явно отделить "старт" от "подразделов" */
.mega-item[data-overview="true"]{
  margin-bottom: 8px;
}
.mega-item[data-overview="true"] + .mega-item{
  margin-top: 2px;
}
.mega-left{
  position: relative;
}
.mega-left::after{
  /* тонкая линия-разделитель (примерно под первым элементом) */
  content: "";
  display: block;
  height: 1px;
  background: color-mix(in srgb, var(--border-color) 85%, transparent);
//   margin: 0 14px 8px;
}


/* =========================
   RIGHT column (preview)
   ========================= */

.mega-right{
  height: 100%;
  overflow: hidden;
}

/* Two areas: content (scrollable) + image (fixed height of panel) */
.mega-preview{
  display: grid;
  grid-template-columns: 1fr 360px;  /* слева контент, справа картинка */
  height: 100%;
  min-height: 0;
}

/* Content: scrollable */
.mega-content{
  padding: 15px 18px 16px;
  overflow-y: auto;

  overscroll-behavior: contain;
  scrollbar-gutter: stable;
}

/* Hide SECTION/kicker */
.mega-kicker { display: none !important; }

.mega-title{
  margin: 0 0 10px 0;
  font-weight: 800;
}

.mega-desc{
  margin: 0 0 14px 0;
  color: var(--text-muted);
}

.mega-subtitle{
  font-size: .85rem;
  font-weight: 750;
  margin: 12px 0 8px;
}

.mega-quicklinks,
.mega-recentlist{
  display: grid;
  gap: 8px;
}

.mega-quicklinks a,
.mega-recentlist a{
  text-decoration: none;
  color: var(--text-color);
  padding: 0px 10px;
  border-radius: 1px;
  border: 1px solid var(--border-color);
  background: color-mix(in srgb, var(--card-bg) 80%, transparent);
  transition: transform .12s ease, border-color .12s ease;
}

.mega-quicklinks a:hover,
.mega-recentlist a:hover{
  transform: translateY(-1px);
  border-color: color-mix(in srgb, var(--brand) 45%, var(--border-color));
}

/* =========================
   IMAGE panel (RIGHT)
   Fix: REAL IMAGE + vertical positioning
   ========================= */

/*
  ПРИЧИНА, почему "картинки не выравнивались":
  ниже в исходнике было:
  .mega-image { background: radial-gradient(...), linear-gradient(...) }
  Это перетирало background-image из JS.

  Решение:
  - НЕ задаём background через shorthand.
  - Делаем overlay через ::before (не мешает background-image).
  - Вертикальное позиционирование: background-position: 50% 35% (или 50% 50%).
*/

.mega-image{
  position: relative;
  height: 100%;
  min-height: 0;
  width: 100%;
  border-left: 1px solid var(--border-color);

  /* Реальная картинка из JS (background-image) */
  background-repeat: no-repeat;
  background-size: cover;

  /* <<< здесь управление вертикалью картинки >>> */
  background-position: 50% 35%; /* попробуй 35% / 45% / 50% */

  overflow: hidden;
}

/* Overlay gradients (do not override image) */
.mega-image::before{
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;

  background:
    radial-gradient(1200px 500px at 10% 10%, rgba(0,123,197,.18), transparent 55%),
    radial-gradient(900px 400px at 90% 40%, rgba(13,202,240,.14), transparent 55%),
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0));
}

/* Optional: if no image is set from JS, show a clean fallback */
.mega-image.is-empty{
  background-image: none !important;
}

/* =========================
   Mobile: пока выключаем (сделаем отдельное меню позже)
   ========================= */

@media (max-width: 992px){
  .mega-panel{ display: none !important; }
  .mega-preview{ grid-template-columns: 1fr; }
  .mega-image{ display: none; }
}

/* ===== TEMP (если у тебя где-то ещё используются классы-градиенты) ===== */
/* ВАЖНО: не используем background: ... (shorthand) чтобы не перетереть imageUrl из JS */
.mega-image.img-data-1::before { background: radial-gradient(circle at 20% 20%, rgba(0,123,197,.35), transparent 55%), linear-gradient(180deg, rgba(255,255,255,.06), transparent); }
.mega-image.img-data-2::before { background: radial-gradient(circle at 70% 30%, rgba(13,202,240,.30), transparent 55%), linear-gradient(180deg, rgba(255,255,255,.06), transparent); }
.mega-image.img-data-3::before { background: radial-gradient(circle at 30% 60%, rgba(0,123,197,.28), transparent 55%), linear-gradient(180deg, rgba(255,255,255,.06), transparent); }
.mega-image.img-data-4::before { background: radial-gradient(circle at 80% 65%, rgba(13,202,240,.24), transparent 55%), linear-gradient(180deg, rgba(255,255,255,.06), transparent); }
.mega-image.img-data-5::before { background: radial-gradient(circle at 50% 50%, rgba(0,123,197,.22), transparent 60%), linear-gradient(180deg, rgba(255,255,255,.06), transparent); }

.mega-image.img-res-1::before { background: radial-gradient(circle at 30% 25%, rgba(0,123,197,.20), transparent 60%), linear-gradient(180deg, rgba(255,255,255,.06), transparent); }
.mega-image.img-res-2::before { background: radial-gradient(circle at 70% 35%, rgba(13,202,240,.18), transparent 60%), linear-gradient(180deg, rgba(255,255,255,.06), transparent); }
.mega-image.img-res-3::before { background: radial-gradient(circle at 40% 70%, rgba(0,123,197,.18), transparent 60%), linear-gradient(180deg, rgba(255,255,255,.06), transparent); }
.mega-image.img-res-4::before { background: radial-gradient(circle at 85% 75%, rgba(13,202,240,.16), transparent 60%), linear-gradient(180deg, rgba(255,255,255,.06), transparent); }
.mega-image.img-res-5::before { background: radial-gradient(circle at 55% 35%, rgba(0,123,197,.16), transparent 60%), linear-gradient(180deg, rgba(255,255,255,.06), transparent); }
.mega-image.img-res-6::before { background: radial-gradient(circle at 20% 80%, rgba(13,202,240,.14), transparent 60%), linear-gradient(180deg, rgba(255,255,255,.06), transparent); }


.mega-cta{
  display: inline-flex;
  align-items: center;
  gap: 8px;

  margin: 6px 0 12px;
  padding: 2px 10px;

  text-decoration: none;
  font-weight: 700;

  color: var(--brand);
  border: 1px solid color-mix(in srgb, var(--brand) 35%, transparent);
  background: color-mix(in srgb, var(--brand) 8%, transparent);
  border-radius: 1px;

  transition: transform .12s ease, background .12s ease, border-color .12s ease;
}

.mega-cta:hover{
  transform: translateY(-1px);
  background: color-mix(in srgb, var(--brand) 12%, transparent);
  border-color: color-mix(in srgb, var(--brand) 55%, transparent);
}
